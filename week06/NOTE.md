##### week06 总结

###### 有限状态机

- 每一个状态都是一个机器
  - 在每一个机器里，我们可以做计算、存储、输出
  - 所有的这些机器接受的输入是一致的
  - 状态机的每一个机器本身没有状态，如果我们用函数来表示的话，它应 该是纯函数(无副作用)
- 每一个状态都是一个机器
  - 每个机器都有确定的下一个状态(Moore 型)
  - 每个机器根据输入决定下一个状态(Mealy 型)

###### HTML 的解析

- 第一步——拆分文件

  - 为了方便文件管理，我们把 parser 单独拆到文件中
  - parser 接受 HTML 文本作为参数，返回一棵 DOM 树

- 第二步——创建状态机

  - 用 FSM 来实现 HTML 的分析
  - 查看 HTML 标准中 HTML 的状态
  - 挑选其中一部分状态，完成一个最简版本

- 第三步——解析标签

  - 主要标签：开始标签，结束标签和自封闭标签
  - 这一步暂时忽略属性

- 第四步——创建元素

  - 除了状态迁移，我们还会要加入业务逻辑
  - 在标签结束状态提交标签 token

- 第五步——处理属性

  - 属性值分为单引号、双引号、无引号属性
  - 处理属性的方式跟标签类似
  - 属性结束时，把属性加到标签 Token 上

- 第六步——构建 DOM 树

  - 从标签构建 DOM 树的基本技巧是使用栈
  - 遇到开始标签时创建元素并入栈，遇到结束标签时出栈
  - 自封闭节点可视为入栈后立刻出栈
  - 任何元素的父元素是它入栈前的栈顶

- 第七步——文本节点
  - 文本节点与自封闭标签处理类似
  - 多个文本节点需要合并
